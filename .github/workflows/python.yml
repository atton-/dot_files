name: Verify python-init script

on: [push, pull_request]

jobs:
  python-alpine:
    runs-on: ubuntu-latest
    container: docker://alpine
    steps:
      - uses: actions/checkout@v2
      - name: Setup dependencies by apk
        run: apk add python3 python3-dev py3-pip gcc libc-dev bash
      - name: Execute python-init.sh
        run: ./scripts/python-init.sh
  python-centos:
    runs-on: ubuntu-latest
    container: docker://centos
    steps:
      - uses: actions/checkout@v2
      - name: Setup dependencies by dnf
        run: dnf install -y gcc python3 python3-devel which
      - name: Execute python-init.sh
        run: ./scripts/python-init.sh
  python-macos:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup dependencies by brew
        run: brew update; brew install python@3.8; brew upgrade python@3.8
      - name: Execute python-init.sh
        run: ./scripts/python-init.sh
